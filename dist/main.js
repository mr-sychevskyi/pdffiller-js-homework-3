!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=function(e,t,n,r=!0){this.name=e,this.score=t,this.id=n,this.isExists=r};r.prototype.getScore=function(){return this.score},r.prototype.setScore=function(e){this.score+=e},r.prototype.resetScore=function(){this.score=0};var o=r;const c=()=>{const e=document.querySelector(".winners-list"),t=JSON.parse(localStorage.getItem("winners"))||{},n=Object.keys(t).sort((e,n)=>t[n]-t[e]);e.childNodes.length&&[...e.querySelectorAll(".winners-list__item")].forEach(e=>e.remove()),n.map(n=>{const r=document.createElement("li");r.classList.add("winners-list__item"),e.appendChild(r);const o=document.createElement("h5");o.classList.add("winners-list__name"),o.innerText=n,r.appendChild(o);const c=document.createElement("span");c.classList.add("winners-list__score"),c.innerText=t[n],r.appendChild(c)})},s=document.querySelector(".dice-wrapper"),i=document.querySelectorAll(".dice"),l=document.querySelector("#game-limit"),u=document.querySelector(".btn-roll"),a=document.querySelector(".btn-hold"),d=document.querySelector(".btn-new"),m=document.querySelector(".btn-show-winners");let p=[],y=0,f=0,S=JSON.parse(localStorage.getItem("winners"))||{},g=Object.keys(S)||[];const h=prompt("Пожалуйста, игрок №1, введите Ваше имя пользователя")||"Игрок 1",w=prompt("Пожалуйста, игрок №2, введите Ваше имя пользователя")||"Игрок 2",x=new o(h),b=new o(w);p.push(x),p.push(b);const q=()=>{f=0,x.resetScore(0),b.resetScore(0),document.querySelector("#name-0").textContent=x.name,document.querySelector("#name-1").textContent=b.name,document.querySelector("#current-0").textContent=0,document.querySelector("#current-1").textContent=0,document.querySelector("#score-0").textContent=0,document.querySelector("#score-1").textContent=0,s.style.display="none",l.value="100"},v=()=>{f=0,document.getElementById("current-"+y).textContent=0,document.querySelector(`.player-${y}-panel`).classList.toggle("active"),y=+!y,s.style.display="none",document.querySelector(`.player-${y}-panel`).classList.toggle("active")};q(),p.forEach(e=>{g.includes(e.name.toLowerCase())&&(e.isExists=confirm(`Вы правда ${e.name}?`)),e.id=e.isExists?e.name:(e=>{const t=e.indexOf("-");if(t<0)return`${e}-${(new Date).valueOf()}`;e.slice(t+1);return`${e.slice(0,t)}-${(new Date).valueOf()}`})(e.name)}),u.addEventListener("click",function(){const e=+l.value||100,t=[],n=[...i].reduce((e,n)=>{const r=Math.floor(6*Math.random())+1;return t.push(r),n.src=`../src/images/dice-${r}.png`,e+r},0);if(s.style.display="block",t.includes(2)||t.length!==(e=>e.filter((t,n)=>e.indexOf(t)===n))(t).length)v();else if(f+=n,document.getElementById("current-"+y).textContent=f,p[y].getScore()+f>=e){const e=p[y].id.toLowerCase();S[e]=S[e]?++S[e]:1,localStorage.setItem("winners",JSON.stringify(S)),alert(`${p[y].name} won!!!`),c()}}),a.addEventListener("click",function(){p[y].setScore(f),document.querySelector(`#score-${y}`).textContent=p[y].getScore(),v()}),d.addEventListener("click",function(){q()}),m.addEventListener("click",function(){const e=document.querySelector(".winners"),t=document.querySelector(".winners-list");e.classList.toggle("hidden"),t.childNodes.length||c()})}]);